[build]
  base = "webApp"
  publish = "webApp/dist"
  command = "npm run build"

[build.environment]
  NODE_VERSION = "18"
  NPM_VERSION = "9"
  # Disable Corepack completely
  COREPACK_ENABLE_STRICT = "0"
  COREPACK_ENABLE_NETWORK = "0"
  # Force npm
  NPM_CONFIG_PACKAGE_MANAGER = "npm"
  # Disable pnpm detection
  PNPM_VERSION = ""

# Override any auto-detection
[build.processing]
  skip_processing = false

[build.processing.css]
  bundle = true
  minify = true

[build.processing.js]
  bundle = true
  minify = true
